<template>
  <div class="propelus-form slds-p-around_medium slds-m-around_medium">
    <template if:true={isLoading}>
      <div class="spinner-container slds-align_absolute-center">
        <lightning-spinner variant="brand" alternative-text="Loading" size="medium"></lightning-spinner>
      </div>
    </template>
    <template if:true={otpValidated}>
      <lightning-icon
        icon-name="utility:success"
        alternative-text="Success!"
        variant="success"
        title="User created successfully!"
      ></lightning-icon>
      <div class="slds-text-color_success slds-text-align_center slds-m-bottom_small">
        Your account has been successfully created. Please log in with your credentials.
      </div>
    </template>
    <template if:true={errorCheck}>
      <div class="slds-text-color_error slds-text-align_center slds-m-around_medium" role="alert">
        <p>
          <lightning-icon
            icon-name="utility:error"
            alternative-text="Error!"
            variant="error"
            title="Error!"
            size="x-small"
          >
          </lightning-icon>
          {errorMessage}
        </p>
      </div>
    </template>

    <lightning-input
      type="email"
      data-id="inputUsername"
      label="Username"
      placeholder="john@company.com"
      class="slds-m-around_medium"
      onchange={handleUserNameChange}
      required
    ></lightning-input>

    <div style="position: relative; float: right; z-index: 1; right: 15px">
      <a style="pointer-events: auto" onclick={revealPassword}>
        <lightning-icon
          class="passwordIcon"
          icon-name={passwordIcon}
          variant="success"
          style="padding: 5px"
          size="small"
          alternative-text="Search Icon"
        ></lightning-icon>
        {showPassword}
      </a>
    </div>

    <lightning-input
      type="password"
      data-id="inputPassword"
      name="inputPassword"
      class="slds-m-around_medium"
      label="Password"
      placeholder="Password"
      maxlength="30"
      onchange={handlePasswordChange}
      required
    ></lightning-input>

    <lightning-button
      class="slds-button"
      variant="brand"
      type="button"
      label="Log In"
      onclick={handleLogin}
      disabled={isLoading}
    >
    </lightning-button>

    <lightning-layout horizontal-align="center">
      <lightning-layout-item padding="around-medium">
        <a href="/ForgotPassword" class="forgot-password-text">Forgot your password?</a>
      </lightning-layout-item>
      <lightning-layout-item padding="around-medium">|</lightning-layout-item>
      <lightning-layout-item padding="around-medium">
        <a href="/SelfRegister" class="register-text">Register</a>
      </lightning-layout-item>
    </lightning-layout>
  </div>
</template>